!function(t,e){"function"==typeof define&&define.amd?define("waterfall",function(){return e}):"object"==typeof module&&module.exports?module.exports=e:t.waterfall=e}(this,function(t){function n(t){return window.getComputedStyle(t)}function e(t,e){return parseFloat(n(e)["margin"+t])||0}function o(t){return parseFloat(t)+"px"}function r(t){return parseFloat(t.style.left)}function i(t){return parseFloat(n(t).width)}function u(t){return parseFloat(t.style.top)+parseFloat(n(t).height)+e("Bottom",t)}function l(t){return r(t)+i(t)+e("Right",t)}function f(t){t.sort(function(t,e){return u(e)-u(t)||r(e)-r(t)})}function a(t,e,n){t.style.position="absolute",t.style.top=o(e),t.style.left=o(n)}var s=(t="string"==typeof t?document.querySelector(t):t).children;s.length&&a(y=s[0],0,e("Left",y));for(var c,p,d=1;d<s.length&&l((c=s)[(p=d)-1])+i(c[p])<=i(t);d++)c=s[d-1],a(p=s[d],c.style.top,l(c)+e("Left",p));for(var h,m,y,g,w=new function(t){var e=t;f(e),this.add=function(t){e.push(t),f(e),e.pop()},this.min=function(){return e[e.length-1]},this.max=function(){return e[0]}}([].slice.call(s,0,d));d<s.length;d++)h=w.min(),a(m=s[d],u(h)+e("Top",m),r(h)),w.add(s[d]);y=t,g=w.max(),y.style.position="relative",y.style.height=o(u(g)+e("Bottom",g))});