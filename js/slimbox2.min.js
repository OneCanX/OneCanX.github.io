!function(c){var o,s,r,a,l,n,d,h,u,f,g,y,p,v,b,m=c(window),e=-1,w=!window.XMLHttpRequest,t=[],k=(document.documentElement,{}),x=new Image,z=new Image;function D(){var i=m.scrollLeft(),e=m.width();c([g]).css("left",i+e/2),n&&c(f).css({left:i,top:m.scrollTop(),width:e,height:m.height()})}function I(i){i?c("object").add(w?"select":"embed").each(function(i,e){t[i]=[e,e.style.visibility],e.style.visibility="hidden"}):(c.each(t,function(i,e){e[0].style.visibility=e[1]}),t=[]);i=i?"bind":"unbind";m[i]("scroll resize",D),c(document)[i]("keydown",L)}function L(i){var i=i.which,e=c.inArray;return 0<=e(i,o.closeKeys)?M():0<=e(i,o.nextKeys)?F():0<=e(i,o.previousKeys)?K():null}function K(){return H(a)}function F(){return H(l)}function H(i){return 0<=i&&(r=s[e=i][0],a=(e||(o.loop?s.length:0))-1,l=(e+1)%s.length||(o.loop?0:-1),W(),g.className="lbLoading",(k=new Image).onload=E,k.src=r),!1}function E(){g.className="",c(y).css({backgroundImage:"url("+r+")",visibility:"hidden",display:"","background-size":"100%"});var i=k.width,e=k.height,t=m.width(),n=m.height(),n=(t<=i||n<=e?n<=t?(c(p).width(.8*n*i/e),c([p,v,b]).height(.8*n)):(c(p).width(.8*t),c([p,v,b]).height(.8*t*e/i)):(c(p).width(k.width),c([p,v,b]).height(k.height)),0<=a&&(x.src=s[a][0]),0<=l&&(z.src=s[l][0]),h=y.offsetWidth,u=y.offsetHeight,Math.max(0,d-u/2));g.offsetHeight!=u&&c(g).animate({height:u,top:n},o.resizeDuration,o.resizeEasing),g.offsetWidth!=h&&c(g).animate({width:h,marginLeft:-h/2},o.resizeDuration,o.resizeEasing),c(g).queue(function(){c(y).css({display:"none",visibility:"",opacity:""}).fadeIn(o.imageFadeDuration,O)})}function O(){0<=a&&c(v).show(),0<=l&&c(b).show()}function W(){k.onload=null,k.src=x.src=z.src=r,c([g,y]).stop(!0),c([v,b,y]).hide()}function M(){return 0<=e&&(W(),e=a=l=-1,c(g).hide(),c(f).stop().fadeOut(o.overlayFadeDuration,I)),!1}c(function(){c("body").append(c([f=c('<div id="lbOverlay" />').click(M)[0],g=c('<div id="lbCenter" />')[0]]).css("display","none")),y=c('<div id="lbImage" />').appendTo(g).append(p=c('<div style="position: relative;" />').append([v=c('<a id="lbPrevLink" href="#" />').click(K)[0],b=c('<a id="lbNextLink" href="#" />').click(F)[0]])[0])[0]}),c.slimbox=function(i,e,t){return o=c.extend({loop:!1,overlayOpacity:.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},t),"string"==typeof i&&(i=[[i,e]],e=0),d=m.scrollTop()+m.height()/2,h=o.initialWidth,u=o.initialHeight,c(g).css({top:Math.max(0,d-u/2),width:h,height:u,marginLeft:-h/2}).show(),(n=w||f.currentStyle&&"fixed"!=f.currentStyle.position)&&(f.style.position="absolute"),c(f).css("opacity",o.overlayOpacity).fadeIn(o.overlayFadeDuration),D(),I(1),s=i,o.loop=o.loop&&1<s.length,H(e)},c.fn.slimbox=function(s,r,a){r=r||function(i){return[i.href,i.title]},a=a||function(){return!0};var l=this;return l.unbind("click").click(function(){for(var t=this,i=0,e=0,n=c.grep(l,function(i,e){return a.call(t,i,e)}),o=n.length;e<o;++e)n[e]==t&&(i=e),n[e]=r(n[e],e);return c.slimbox(n,i,s)})}}(jQuery);