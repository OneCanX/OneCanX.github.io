try{var localSearch=mengd.$id("local-search"),html=mengd.$query("html"),mask=mengd.$id("mask"),searchBtn=mengd.$query(".search-btn"),searchClose=mengd.$query(".search-close-button"),isLoad=!1,searchId="local-search-input",contentId="local-search-result";async function search(t){try{let e=mengd.$id(contentId),a=[];var s=new URL(t,location.origin).pathname.split(".")[1];e.insertAdjacentHTML("beforeBegin",'<i class="fas fa-spinner fa-pulse" style="display:flex;justify-content:center"></i>');const c=await fetch(t);if("json"==s&&(a=await c.json()),"xml"==s){var l=await c.text();const o=new window.DOMParser,h=o.parseFromString(l,"text/xml");a=[...h.querySelectorAll("entry")].map(e=>({title:e.querySelector("title").textContent,content:e.querySelector("content").textContent,url:e.querySelector("url").textContent}))}a.length&&(isLoad=!0);const i=mengd.$query("i.fa-pulse");i.parentElement.removeChild(i);var r=mengd.$id(searchId);function n(){var d='<ul class="search-result-list">',m=r.value.trim().toLowerCase().split(/[\s\-]+/);e.innerHTML="",r.value.trim().length<=0||(a.forEach(e=>{var t,a,s,l,r=!0,n=(e.title&&""!==e.title.trim()||(e.title="Untitled"),e.title.trim().toLowerCase()),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=e.url.startsWith("/")?e.url:"/"+e.url,o=-1,h=-1;""!==c?m.forEach(function(e,a){t=n.indexOf(e),o=c.indexOf(e),t<0&&o<0?r=!1:(o<0&&(o=0),0==a&&(h=o))}):r=!1,r&&(e=e.content.trim().replace(/<[^>]+>/g,""),0<=h&&(s=h+80,(s=0==(a=(a=h-20)<0?0:a)?100:s)>e.length&&(s=e.length),l=e.substring(a,s),m.forEach(e=>{var a=new RegExp(e,"gi");l=l.replace(a,'<span class="search-keyword">'+e+"</span>"),n=n.replace(a,'<span class="search-keyword">'+e+"</span>")}),d=d+"<li><a href='"+i+"' class='search-result-title'>"+n+'</a><p class="search-result">'+l+"...</p>"),d+="</li>")}),d+="</ul>",e.innerHTML=d,window.pjax&&window.pjax.refresh(e))}n(),r.addEventListener("input",n)}catch(e){isLoad=!1}}searchBtn.onclick=function(){isLoad||search($config.searchFile),mask.className="mask",localSearch.style.display||(localSearch.style.display="block",html.style.overflow="hidden",localSearch.classList.remove("search-animation-min"),localSearch.classList.add("search-animation-max"),mengd.$id(searchId).focus())},searchClose.onclick=function(){localSearch.classList.remove("search-animation-max"),localSearch.classList.add("search-animation-min"),mask.classList.remove("mask"),html.style.overflow="auto",setTimeout(()=>localSearch.style.display="",500)},window.addEventListener("pjax:complete",()=>{"none"===localSearch.style.display&&(mask.className="")})}catch(e){console.log("search error: ",e)}